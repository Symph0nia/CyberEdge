```
CyberEdge 程序架构和流程

1. 程序启动
   |
   v
2. 初始化日志系统
   |
   v
3. 启动日志轮换
   |
   v
4. 连接 MongoDB
   |
   v
5. 初始化数据库集合
   |
   v
6. 连接 RabbitMQ
   |
   v
7. 创建 RabbitMQ 通道
   |
   v
8. 设置数据库集合
   |
   v
9. 初始化任务调度器
   |
   v
10. 设置全局变量
    |
    v
11. 启动任务处理器（异步）
    |
    v
12. 设置 API 路由
    |
    v
13. 启动 API 服务器
```

详细说明：

1. 程序启动：
   - 主函数开始执行。

2. 初始化日志系统：
   - 创建日志文件。
   - 设置日志级别和格式。

3. 启动日志轮换：
   - 设置定期（每24小时）轮换日志文件的机制。

4. 连接 MongoDB：
   - 建立与 MongoDB 数据库的连接。
   - 处理连接错误。

5. 初始化数据库集合：
   - 确保必要的数据库集合存在。

6. 连接 RabbitMQ：
   - 建立与 RabbitMQ 消息队列的连接。
   - 处理连接错误。

7. 创建 RabbitMQ 通道：
   - 在 RabbitMQ 连接上创建通信通道。

8. 设置数据库集合：
   - 为不同的功能模块（如用户、任务等）设置相应的数据库集合。

9. 初始化任务调度器：
   - 创建任务调度器，用于管理和执行各种任务。

10. 设置全局变量：
    - 设置全局可访问的变量，如调度器和 JWT 密钥。

11. 启动任务处理器（异步）：
    - 在后台启动任务处理器，用于执行调度的任务。

12. 设置 API 路由：
    - 配置 HTTP API 路由，定义各种 API 端点。

13. 启动 API 服务器：
    - 启动 HTTP 服务器，开始监听指定端口（8081）的请求。

错误处理：
- 在每个步骤中，如果发生错误，程序会记录错误并停止执行。
- 使用 defer 语句确保资源（如数据库连接）在程序退出时被正确关闭。

并发处理：
- 任务处理器在独立的 goroutine 中运行，允许异步任务处理。

模块化设计：
- 程序分为多个模块：日志、数据库连接、消息队列、任务调度、API 路由等。
- 每个模块都有明确的职责，提高了代码的可维护性和可扩展性。

配置管理：
- 关键配置（如数据库 URI、RabbitMQ 连接字符串）应该从配置文件或环境变量中读取，而不是硬编码。

安全考虑：
- 使用 JWT 进行 API 认证。
- 确保敏感信息（如数据库凭证）得到适当保护。
